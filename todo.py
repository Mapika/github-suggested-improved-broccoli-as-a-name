import sys,os,zlib,base64 as b;S=sys.stdin;A=sys.argv;T=S.isatty();C=(A[1:]or['list'if T else'add'])[0];F=os.getenv('TODO_FILE_PATH','todo.md');K='- [';W=open
try:L=W(F).readlines()
except:L=[]
R=''if T else S.read();V=A[2:]or([R.strip()]if C=='add'else R.split());n=lambda i:sum(x[:3]==K for x in L[:i+1])
C=='add'and(W(F,'a').writelines(f'- [ ] {x}\n'for x in V)or 1)or C=='list'and(print(''.join(f'{n(i)} {x[2:]}'if x[:3]==K else x for i,x in enumerate(L)),end='')or 1)or C in('do','undo')and(W(F,'w').writelines(K+'x '[C>'e']+'] '+x[6:]if x[:3]==K and str(n(i))in V else x for i,x in enumerate(L))or 1)or C=='clear'and(W(F,'w').writelines(x for x in L if x[:5]!='- [x]')or 1)or print(zlib.decompress(b.b64decode(b'eJyFVE1v1DAQvftXDOFQKqXZIm4RFCEBAgmpHHpDVeXGsxtrHY/lj00j8eOZsdtK5QB72DieeeN5b56jLKw6QZ6tP1p/gM6CRzSgIdklOITJWchkCHQIndLecC566FZtM1iYqDgDa7QZOaB5y4OzR4R3l/z0mID2ELY8k+/6Ck/EMGMN2Jr89hJkd9EGZWciOTWj26D4iNroe4eDShgtleS2gZPOuF/0rXwPq5wq9TYqgA8Bp/xRwQVMqWSKWqkP//kp9RpK0gccG9FfesqW/C0v4iHdSrjtpFFd8KkpwxuDe11cPh/ru+iHFZwGmLSHmSmxdnb/HIC95Y2ZpW6qVK10RH+WG7BXAPclC4sz59oQMgEaFoXVSwirzTNrRVwyQoh0iHoZKuujp7VnvewDhNk6ShTmbeBmtTGj/CXQXHNfYsUyrbKg57Zl8rVrzjW0K97QyKOIx38ADHkEisCN1LVgJ4c6ju3RoLXsM8taU1yVHiGs6bMqoxIOIhudMEZr8C/VSmLok+RgW8/DYsQ+kjmVyEKKCSIPn+J2rk5W19DN9efru6/ff3y5+/np5hugP9lIXrjASUfbzPU0/6ZwsAGldCh5hPdUMi9gH2mBF8pfwe+XdlEcRBlHBArVLpU5ebYyj6Bn5r3oJiL31fO8W9lwn4/kBqVdkihHMrv/0VnrTOImaUkklAHUoyt/rjDp1Ggwf1qYndHSwMjXJkOakeehneWk1O5mJ+gOLq6ga1cTdkHneZdpV6UNW1cb7GRYLa+exyClZn1CdobnN/5gvFJ/ACCdcvE=')).decode())
